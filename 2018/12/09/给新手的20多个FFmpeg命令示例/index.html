<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Linux," />





  <link rel="alternate" href="/atom.xml" title="码农小杨的笔记" type="application/atom+xml" />






<meta name="description" content="在这个指南中，我将用示例来阐明如何使用 FFmpeg 媒体框架来做各种各样的音频、视频转码和转换的操作。我已经为初学者汇集了最常用的 20 多个 FFmpeg 命令，我将不时地添加更多的示例来保持更新这个指南。请给这个指南加书签，以后回来检查更新。让我们开始吧，如果你还没有在你的 Linux 系统中安装 FFmpeg，参考下面的指南。  在 Linux 中安装 FFmpeg  针对初学者的 20">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="命令示例">
<meta property="og:url" content="https://zhaobugs.com/2018/12/09/给新手的20多个FFmpeg命令示例/index.html">
<meta property="og:site_name" content="码农小杨的笔记">
<meta property="og:description" content="在这个指南中，我将用示例来阐明如何使用 FFmpeg 媒体框架来做各种各样的音频、视频转码和转换的操作。我已经为初学者汇集了最常用的 20 多个 FFmpeg 命令，我将不时地添加更多的示例来保持更新这个指南。请给这个指南加书签，以后回来检查更新。让我们开始吧，如果你还没有在你的 Linux 系统中安装 FFmpeg，参考下面的指南。  在 Linux 中安装 FFmpeg  针对初学者的 20">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-01-05T09:15:51.206Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="命令示例">
<meta name="twitter:description" content="在这个指南中，我将用示例来阐明如何使用 FFmpeg 媒体框架来做各种各样的音频、视频转码和转换的操作。我已经为初学者汇集了最常用的 20 多个 FFmpeg 命令，我将不时地添加更多的示例来保持更新这个指南。请给这个指南加书签，以后回来检查更新。让我们开始吧，如果你还没有在你的 Linux 系统中安装 FFmpeg，参考下面的指南。  在 Linux 中安装 FFmpeg  针对初学者的 20">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'XCAWE8DOZ6',
      apiKey: '1177079624f5060aa4459d3c7349c8c2',
      indexName: 'dev_zhaobugs',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"没有找到有关 ${query} 的内容","hits_stats":"搜索到 ${hits} 条相关记录，共耗时 ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zhaobugs.com/2018/12/09/给新手的20多个FFmpeg命令示例/"/>





  <title>命令示例 | 码农小杨的笔记</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">码农小杨的笔记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">知识就是财富</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhaobugs.com/2018/12/09/给新手的20多个FFmpeg命令示例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小码农">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/ava.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码农小杨的笔记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">命令示例</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-09T15:10:56+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/09/给新手的20多个FFmpeg命令示例/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/12/09/给新手的20多个FFmpeg命令示例/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/12/09/给新手的20多个FFmpeg命令示例/" class="leancloud_visitors" data-flag-title="命令示例">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,206 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  17 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>在这个指南中，我将用示例来阐明如何使用 FFmpeg 媒体框架来做各种各样的音频、视频转码和转换的操作。我已经为初学者汇集了最常用的 20 多个 FFmpeg 命令，我将不时地添加更多的示例来保持更新这个指南。请给这个指南加书签，以后回来检查更新。让我们开始吧，如果你还没有在你的 Linux 系统中安装 FFmpeg，参考下面的指南。</p>
<ul>
<li><a href="https://link.zhihu.com/?target=https%3A//www.ostechnix.com/install-ffmpeg-linux/" target="_blank" rel="noopener">在 Linux 中安装 FFmpeg</a></li>
</ul>
<h4 id="针对初学者的-20-多个-FFmpeg-命令"><a href="#针对初学者的-20-多个-FFmpeg-命令" class="headerlink" title="针对初学者的 20 多个 FFmpeg 命令"></a>针对初学者的 20 多个 FFmpeg 命令</h4><p>FFmpeg 命令的典型语法是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg [全局选项] &#123;[输入文件选项] -i 输入_url_地址&#125; ...</span><br><span class="line"> &#123;[输出文件选项] 输出_url_地址&#125; ...</span><br></pre></td></tr></table></figure>
<p>现在我们将查看一些重要的和有用的 FFmpeg 命令。</p>
<h5 id="1、获取音频-视频文件信息"><a href="#1、获取音频-视频文件信息" class="headerlink" title="1、获取音频/视频文件信息"></a><code>1、获取音频/视频文件信息</code></h5><p>为显示你的媒体文件细节，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i video.mp4</span><br></pre></td></tr></table></figure>
<p>样本输出：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg version <span class="number">4.2</span>.<span class="number">2</span> Copyright (c) <span class="number">2000</span>-<span class="number">2019</span> the FFmpeg developers</span><br><span class="line">  built with Apple clang version <span class="number">11.0</span>.<span class="number">0</span> (clang-<span class="number">1100.0</span>.<span class="number">33.16</span>)</span><br><span class="line">  configuration: --prefix=/usr/local/Cellar/ffmpeg/<span class="number">4.2</span>.<span class="number">2</span>_1 --enable-shared --enable-pthreads --enable-version3 --enable-avresample --cc=clang --host-cflags=<span class="string">'-I/Library/Java/JavaVirtualMachines/adoptopenjdk-13.0.1.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/adoptopenjdk-13.0.1.jdk/Contents/Home/include/darwin -fno-stack-check'</span> --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libbluray --enable-libmp3lame --enable-libopus --enable-librubberband --enable-libsnappy --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librtmp --enable-libspeex --enable-libsoxr --enable-videotoolbox --disable-libjack --disable-indev=jack</span><br><span class="line">  libavutil      <span class="number">56</span>. <span class="number">31.100</span> / <span class="number">56</span>. <span class="number">31.100</span></span><br><span class="line">  libavcodec     <span class="number">58</span>. <span class="number">54.100</span> / <span class="number">58</span>. <span class="number">54.100</span></span><br><span class="line">  libavformat    <span class="number">58</span>. <span class="number">29.100</span> / <span class="number">58</span>. <span class="number">29.100</span></span><br><span class="line">  libavdevice    <span class="number">58</span>.  <span class="number">8.100</span> / <span class="number">58</span>.  <span class="number">8.100</span></span><br><span class="line">  libavfilter     <span class="number">7</span>. <span class="number">57.100</span> /  <span class="number">7</span>. <span class="number">57.100</span></span><br><span class="line">  libavresample   <span class="number">4</span>.  <span class="number">0</span>.  <span class="number">0</span> /  <span class="number">4</span>.  <span class="number">0</span>.  <span class="number">0</span></span><br><span class="line">  libswscale      <span class="number">5</span>.  <span class="number">5.100</span> /  <span class="number">5</span>.  <span class="number">5.100</span></span><br><span class="line">  libswresample   <span class="number">3</span>.  <span class="number">5.100</span> /  <span class="number">3</span>.  <span class="number">5.100</span></span><br><span class="line">  libpostproc    <span class="number">55</span>.  <span class="number">5.100</span> / <span class="number">55</span>.  <span class="number">5.100</span></span><br><span class="line">Input <span class="comment">#0, mov,mp4,m4a,3gp,3g2,mj2, from '2-1 python中一切皆对象.mp4':</span></span><br><span class="line">  Metadata:</span><br><span class="line">    major_brand     : isom</span><br><span class="line">    minor_version   : <span class="number">512</span></span><br><span class="line">    compatible_brands: isomiso2avc1mp41</span><br><span class="line">    title           : EV录屏<span class="number">3.9</span>.<span class="number">3</span>软件录制</span><br><span class="line">    encoder         : Lavf57.<span class="number">41.100</span></span><br><span class="line">    comment         : 本视频由湖南一唯信息科技开发的EV录屏软件录制，www.ieway.cn</span><br><span class="line">  Duration: <span class="number">00</span>:<span class="number">12</span>:<span class="number">47.40</span>, start: <span class="number">0.000000</span>, bitrate: <span class="number">370</span> kb/s</span><br><span class="line">    Stream <span class="comment">#0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 256 kb/s, 12 fps, 12 tbr, 12288 tbn, 24 tbc (default)</span></span><br><span class="line">    Metadata:</span><br><span class="line">      handler_name    : VideoHandler</span><br><span class="line">    Stream <span class="comment">#0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 109 kb/s (default)</span></span><br><span class="line">    Metadata:</span><br><span class="line">      handler_name    : SoundHandler</span><br></pre></td></tr></table></figure>
<p>如你在上面的输出中看到的，FFmpeg 显示该媒体文件信息，以及 FFmpeg 细节，例如版本、配置细节、版权标记、构建参数和库选项等等。</p>
<p>如果你不想看 FFmpeg 标语和其它细节，而仅仅想看媒体文件信息，使用 <code>-hide_banner</code> 标志，像下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i video.mp4 -hide_banner</span><br></pre></td></tr></table></figure>
<p>样本输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &apos;video.mp4&apos;:</span><br><span class="line">  Metadata:</span><br><span class="line">    major_brand     : isom</span><br><span class="line">    minor_version   : 512</span><br><span class="line">    compatible_brands: isomiso2avc1mp41</span><br><span class="line">    title           : EV录屏3.9.3软件录制</span><br><span class="line">    encoder         : Lavf57.41.100</span><br><span class="line">    comment         : 本视频由湖南一唯信息科技开发的EV录屏软件录制，www.ieway.cn</span><br><span class="line">  Duration: 00:12:47.40, start: 0.000000, bitrate: 370 kb/s</span><br><span class="line">    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 256 kb/s, 12 fps, 12 tbr, 12288 tbn, 24 tbc (default)</span><br><span class="line">    Metadata:</span><br><span class="line">      handler_name    : VideoHandler</span><br><span class="line">    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 109 kb/s (default)</span><br><span class="line">    Metadata:</span><br><span class="line">      handler_name    : SoundHandler</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 FFMpeg 查看音频、视频文件信息。</p>
</blockquote>
<p>看见了吗？现在，它仅显示媒体文件细节。</p>
<h5 id="2、转换视频文件到不同的格式"><a href="#2、转换视频文件到不同的格式" class="headerlink" title="2、转换视频文件到不同的格式"></a><code>2、转换视频文件到不同的格式</code></h5><p>FFmpeg 是强有力的音频和视频转换器，因此，它能在不同格式之间转换媒体文件。举个例子，要转换 mp4 文件到 avi 文件，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i video.mp4 video.avi</span><br></pre></td></tr></table></figure>
<p>类似地，你可以转换媒体文件到你选择的任何格式。</p>
<p>例如，为转换 YouTube flv 格式视频为 mpeg 格式，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i video.flv video.mpeg</span><br></pre></td></tr></table></figure>
<p><strong>如果你想维持你的源视频文件的质量</strong>，使用 <code>-qscale 0</code> 参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.webm -qscale 0 output.mp4</span><br></pre></td></tr></table></figure>
<p>也可以尝试使用<code>-crf 0</code>和<code>-qp 0</code>保持源视频文件的质量</p>
<p>如果你使用<code>-qscale 0</code>   有时会提示你<code>ffmpeg Please use -q:a or -q:v, -qscale is ambiguous</code></p>
<p>如果按照提示改用<code>-q:a  0</code>或者 <code>-q:v 0</code>也可以保持画质不错的</p>
<p>为检查 FFmpeg 的支持格式的列表，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -formats</span><br></pre></td></tr></table></figure>
<h5 id="3、转换视频文件到音频文件"><a href="#3、转换视频文件到音频文件" class="headerlink" title="3、转换视频文件到音频文件"></a><code>3、转换视频文件到音频文件</code></h5><p>我转换一个视频文件到音频文件，只需具体指明输出格式，像 .mp3，或 .ogg，或其它任意音频格式。</p>
<p>上面的命令将转换 input.mp4 视频文件到 output.mp3 音频文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vn output.mp3</span><br></pre></td></tr></table></figure>
<p>此外，你也可以对输出文件使用各种各样的音频转换编码选项，像下面演示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vn -ar 44100 -ac 2 -ab 320 -f mp3 output.mp3</span><br></pre></td></tr></table></figure>
<p>在这里，</p>
<ul>
<li><code>-vn</code> – 表明我们已经在输出文件中禁用视频录制。</li>
<li><code>-ar</code> – 设置输出文件的音频频率。通常使用的值是22050 Hz、44100 Hz、48000 Hz。</li>
<li><code>-ac</code> – 设置音频通道的数目。</li>
<li><code>-ab</code> – 表明音频比特率。</li>
<li><code>-f</code> – 输出文件格式。在我们的实例中，它是 mp3 格式。</li>
</ul>
<h5 id="4、更改视频文件的分辨率"><a href="#4、更改视频文件的分辨率" class="headerlink" title="4、更改视频文件的分辨率"></a><code>4、更改视频文件的分辨率</code></h5><p>如果你想设置一个视频文件为指定的分辨率，你可以使用下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -filter:v scale=1280:720 -c:a copy output.mp4</span><br></pre></td></tr></table></figure>
<p>或，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -s 1280x720 -c:a copy output.mp4</span><br></pre></td></tr></table></figure>
<p>上面的命令将设置所给定视频文件的分辨率到 1280×720。</p>
<p>类似地，为转换上面的文件到 640×480 大小，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -filter:v scale=640:480 -c:a copy output.mp4</span><br></pre></td></tr></table></figure>
<p>或者，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -s 640x480 -c:a copy output.mp4</span><br></pre></td></tr></table></figure>
<p>这个技巧将帮助你缩放你的视频文件到较小的显示设备上，例如平板电脑和手机。</p>
<h5 id="5、压缩视频文件"><a href="#5、压缩视频文件" class="headerlink" title="5、压缩视频文件"></a><code>5、压缩视频文件</code></h5><p>减小媒体文件的大小到较小来节省硬件的空间总是一个好主意.</p>
<p>下面的命令将压缩并减少输出文件的大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vf scale=1280:-1 -c:v libx264 -preset veryslow -crf 24 output.mp4</span><br></pre></td></tr></table></figure>
<p>请注意，如果你尝试减小视频文件的大小，你将损失视频质量。如果 24 太有侵略性，你可以降低 <code>-crf</code> 值到或更低值。</p>
<p>你也可以通过下面的选项来转换编码音频降低比特率，使其有立体声感，从而减小大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-ac 2 -c:a aac -strict -2 -b:a 128k</span><br></pre></td></tr></table></figure>
<h5 id="6、压缩音频文件"><a href="#6、压缩音频文件" class="headerlink" title="6、压缩音频文件"></a><code>6、压缩音频文件</code></h5><p>正像压缩视频文件一样，为节省一些磁盘空间，你也可以使用 <code>-ab</code> 标志压缩音频文件。</p>
<p>例如，你有一个 320 kbps 比特率的音频文件。你想通过更改比特率到任意较低的值来压缩它，像下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp3 -ab 128 output.mp3</span><br></pre></td></tr></table></figure>
<p>各种各样可用的音频比特率列表是：</p>
<ol>
<li>96kbps</li>
<li>112kbps</li>
<li>128kbps</li>
<li>160kbps</li>
<li>192kbps</li>
<li>256kbps</li>
<li>320kbps</li>
</ol>
<h5 id="7、从一个视频文件移除音频流"><a href="#7、从一个视频文件移除音频流" class="headerlink" title="7、从一个视频文件移除音频流"></a><code>7、从一个视频文件移除音频流</code></h5><p>如果你不想要一个视频文件中的音频，使用 <code>-an</code> 标志。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -an output.mp4</span><br></pre></td></tr></table></figure>
<p>在这里，<code>-an</code> 表示没有音频录制。</p>
<p>上面的命令会撤销所有音频相关的标志，因为我们不要来自 input.mp4 的音频。</p>
<h5 id="8、从一个媒体文件移除视频流"><a href="#8、从一个媒体文件移除视频流" class="headerlink" title="8、从一个媒体文件移除视频流"></a><code>8、从一个媒体文件移除视频流</code></h5><p>类似地，如果你不想要视频流，你可以使用 <code>-vn</code> 标志从媒体文件中简单地移除它。<code>-vn</code> 代表没有视频录制。换句话说，这个命令转换所给定媒体文件为音频文件。</p>
<p>下面的命令将从所给定媒体文件中移除视频。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vn output.mp3</span><br></pre></td></tr></table></figure>
<p>你也可以使用 <code>-ab</code> 标志来指出输出文件的比特率，如下面的示例所示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vn -ab 320 output.mp3</span><br></pre></td></tr></table></figure>
<h5 id="9、从视频中提取图像"><a href="#9、从视频中提取图像" class="headerlink" title="9、从视频中提取图像"></a><code>9、从视频中提取图像</code></h5><p>FFmpeg 的另一个有用的特色是我们可以从一个视频文件中轻松地提取图像。如果你想从一个视频文件中创建一个相册，这可能是非常有用的。</p>
<p>为从一个视频文件中提取图像，使用下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -r 1 -f image2 image-%2d.png</span><br></pre></td></tr></table></figure>
<p>在这里，</p>
<ul>
<li><code>-r</code> – 设置帧速度。即，每秒提取帧到图像的数字。默认值是 25。</li>
<li><code>-f</code> – 表示输出格式，即，在我们的实例中是图像。</li>
<li><code>image-%2d.png</code> – 表明我们如何想命名提取的图像。在这个实例中，命名应该像这样image-01.png、image-02.png、image-03.png 等等开始。如果你使用 <code>%3d</code>，那么图像的命名像 image-001.png、image-002.png 等等开始。</li>
</ul>
<h5 id="10、裁剪视频"><a href="#10、裁剪视频" class="headerlink" title="10、裁剪视频"></a><code>10、裁剪视频</code></h5><p>FFMpeg 允许以我们选择的任何范围裁剪一个给定的媒体文件。</p>
<p>裁剪一个视频文件的语法如下给定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -filter:v &quot;crop=w:h:x:y&quot; output.mp4</span><br></pre></td></tr></table></figure>
<p>在这里，</p>
<ul>
<li><code>input.mp4</code> – 源视频文件。</li>
<li><code>-filter:v</code> – 表示视频过滤器。</li>
<li><code>crop</code> – 表示裁剪过滤器。</li>
<li><code>w</code> – 我们想自源视频中裁剪的矩形的宽度。</li>
<li><code>h</code> – 矩形的高度。</li>
<li><code>x</code> – 我们想自源视频中裁剪的矩形的 x 坐标 。</li>
<li><code>y</code> – 矩形的 y 坐标。</li>
</ul>
<p>比如说你想要一个来自视频的位置 (200,150)，且具有 640 像素宽度和 480 像素高度的视频，命令应该是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -filter:v &quot;crop=640:480:200:150&quot; output.mp4</span><br></pre></td></tr></table></figure>
<p>请注意，剪切视频将影响质量。除非必要，请勿剪切。</p>
<blockquote>
<p>如果x y不写的话，默认居中剪切</p>
</blockquote>
<h5 id="11、转换一个视频的具体的部分"><a href="#11、转换一个视频的具体的部分" class="headerlink" title="11、转换一个视频的具体的部分"></a><code>11、转换一个视频的具体的部分</code></h5><p>有时，你可能想仅转换视频文件的一个具体的部分到不同的格式。以示例说明，下面的命令将转换所给定视频input.mp4 文件的开始 10 秒到视频 .avi 格式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -t 10 output.avi</span><br></pre></td></tr></table></figure>
<p>在这里，我们以秒具体说明时间。此外，以 <code>hh.mm.ss</code> 格式具体说明时间也是可以的。</p>
<h5 id="12、设置视频的屏幕高宽比"><a href="#12、设置视频的屏幕高宽比" class="headerlink" title="12、设置视频的屏幕高宽比"></a><code>12、设置视频的屏幕高宽比</code></h5><p>你可以使用 <code>-aspect</code> 标志设置一个视频文件的屏幕高宽比，像下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -aspect 16:9 output.mp4</span><br></pre></td></tr></table></figure>
<p>通常使用的高宽比是：</p>
<ul>
<li>16:9</li>
<li>4:3</li>
<li>16:10</li>
<li>5:4</li>
<li>2:21:1</li>
<li>2:35:1</li>
<li>2:39:1</li>
</ul>
<h5 id="13、添加海报图像到音频文件"><a href="#13、添加海报图像到音频文件" class="headerlink" title="13、添加海报图像到音频文件"></a><code>13、添加海报图像到音频文件</code></h5><p>你可以添加海报图像到你的文件，以便图像将在播放音频文件时显示。这对托管在视频托管主机或共享网站中的音频文件是有用的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -loop 1 -i inputimage.jpg -i inputaudio.mp3 -c:v libx264 -c:a aac -strict experimental -b:a 192k -shortest output.mp4</span><br></pre></td></tr></table></figure>
<h5 id="14、使用开始和停止时间剪下一段媒体文件"><a href="#14、使用开始和停止时间剪下一段媒体文件" class="headerlink" title="14、使用开始和停止时间剪下一段媒体文件"></a><code>14、使用开始和停止时间剪下一段媒体文件</code></h5><p>可以使用开始和停止时间来剪下一段视频为小段剪辑，我们可以使用下面的命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -ss 00:00:50 -codec copy -t 50 output.mp4</span><br></pre></td></tr></table></figure>
<p>在这里，</p>
<ul>
<li><code>–s</code> – 表示视频剪辑的开始时间。在我们的示例中，开始时间是第 50 秒。</li>
<li><code>-t</code> – 表示总的持续时间。</li>
</ul>
<p>当你想使用开始和结束时间从一个音频或视频文件剪切一部分时，它是非常有用的。</p>
<p>类似地，我们可以像下面剪下音频。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i audio.mp3 -ss 00:01:54 -to 00:06:53 -c copy output.mp3</span><br></pre></td></tr></table></figure>
<h5 id="15、切分视频文件为多个部分"><a href="#15、切分视频文件为多个部分" class="headerlink" title="15、切分视频文件为多个部分"></a><code>15、切分视频文件为多个部分</code></h5><p>一些网站将仅允许你上传具体指定大小的视频。在这样的情况下，你可以切分大的视频文件到多个较小的部分，像下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -t 00:00:30 -c copy part1.mp4 -ss 00:00:30 -codec copy part2.mp4</span><br></pre></td></tr></table></figure>
<p>在这里，</p>
<ul>
<li><code>-t 00:00:30</code> 表示从视频的开始到视频的第 30 秒创建一部分视频。</li>
<li><code>-ss 00:00:30</code> 为视频的下一部分显示开始时间戳。它意味着第 2 部分将从第 30 秒开始，并将持续到原始视频文件的结尾。</li>
</ul>
<h5 id="16、接合或合并多个视频部分到一个"><a href="#16、接合或合并多个视频部分到一个" class="headerlink" title="16、接合或合并多个视频部分到一个"></a><code>16、接合或合并多个视频部分到一个</code></h5><p>FFmpeg 也可以接合多个视频部分，并创建一个单个视频文件。</p>
<p>创建包含你想接合文件的准确的路径的 <code>join.txt</code>。所有的文件都应该是相同的格式（相同的编码格式）。所有文件的路径应该逐个列出，像下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file /home/sk/myvideos/part1.mp4</span><br><span class="line">file /home/sk/myvideos/part2.mp4</span><br><span class="line">file /home/sk/myvideos/part3.mp4</span><br><span class="line">file /home/sk/myvideos/part4.mp4</span><br></pre></td></tr></table></figure>
<p>现在，接合所有文件，使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -f concat -i join.txt -c copy output.mp4</span><br></pre></td></tr></table></figure>
<p>如果你得到一些像下面的错误；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[concat @ 0x555fed174cc0] Unsafe file name &apos;/path/to/mp4&apos;</span><br><span class="line">join.txt: Operation not permitted</span><br></pre></td></tr></table></figure>
<p>添加 <code>-safe 0</code> :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -f concat -safe 0 -i join.txt -c copy output.mp4</span><br></pre></td></tr></table></figure>
<p>上面的命令将接合 part1.mp4、part2.mp4、part3.mp4 和 part4.mp4 文件到一个称为 output.mp4 的单个文件中。</p>
<h5 id="17、添加字幕到一个视频文件"><a href="#17、添加字幕到一个视频文件" class="headerlink" title="17、添加字幕到一个视频文件"></a><code>17、添加字幕到一个视频文件</code></h5><p>我们可以使用 FFmpeg 来添加字幕到视频文件。为你的视频下载正确的字幕，并如下所示添加它到你的视频。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fmpeg -i input.mp4 -i subtitle.srt -map 0 -map 1 -c copy -c:v libx264 -crf 23 -preset veryfast output.mp4</span><br></pre></td></tr></table></figure>
<h5 id="18、预览或测试视频或音频文件"><a href="#18、预览或测试视频或音频文件" class="headerlink" title="18、预览或测试视频或音频文件"></a><code>18、预览或测试视频或音频文件</code></h5><p>你可能希望通过预览来验证或测试输出的文件是否已经被恰当地转码编码。为完成预览，你可以从你的终端播放它，用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffplay video.mp4</span><br></pre></td></tr></table></figure>
<p>类似地，你可以测试音频文件，像下面所示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffplay audio.mp3</span><br></pre></td></tr></table></figure>
<h5 id="19、增加-减少视频播放速度"><a href="#19、增加-减少视频播放速度" class="headerlink" title="19、增加/减少视频播放速度"></a><code>19、增加/减少视频播放速度</code></h5><p>FFmpeg 允许你调整视频播放速度。</p>
<p>为增加视频播放速度，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vf &quot;setpts=0.5*PTS&quot; output.mp4</span><br></pre></td></tr></table></figure>
<p>该命令将双倍视频的速度。</p>
<p>为降低你的视频速度，你需要使用一个大于 1 的倍数。为减少播放速度，运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ffmpeg -i input.mp4 -vf &quot;setpts=4.0*PTS&quot; output.mp4</span><br></pre></td></tr></table></figure>
<h5 id="20、创建动画的-GIF"><a href="#20、创建动画的-GIF" class="headerlink" title="20、创建动画的 GIF"></a><code>20、创建动画的 GIF</code></h5><p>出于各种目的，我们在几乎所有的社交和专业网络上使用 GIF 图像。使用 FFmpeg，我们可以简单地和快速地创建动画的视频文件。下面的指南阐释了如何在类 Unix 系统中使用 FFmpeg 和 ImageMagick 创建一个动画的 GIF 文件。</p>
<ul>
<li><a href="https://link.zhihu.com/?target=https%3A//www.ostechnix.com/create-animated-gif-ubuntu-16-04/" target="_blank" rel="noopener">在 Linux 中如何创建动画的 GIF</a></li>
</ul>
<h5 id="21、从-PDF-文件中创建视频"><a href="#21、从-PDF-文件中创建视频" class="headerlink" title="21、从 PDF 文件中创建视频"></a><code>21、从 PDF 文件中创建视频</code></h5><p>我长年累月的收集了很多 PDF 文件，大多数是 Linux 教程，保存在我的平板电脑中。有时我懒得从平板电脑中阅读它们。因此，我决定从 PDF 文件中创建一个视频，在一个大屏幕设备（像一台电视机或一台电脑）中观看它们。如果你想知道如何从一批 PDF 文件中制作一个电影，下面的指南将帮助你。</p>
<ul>
<li><a href="https://link.zhihu.com/?target=https%3A//www.ostechnix.com/create-video-pdf-files-linux/" target="_blank" rel="noopener">在 Linux 中如何从 PDF 文件中创建一个视频</a></li>
</ul>
<h5 id="22关于转码"><a href="#22关于转码" class="headerlink" title="22关于转码"></a><code>22关于转码</code></h5><p>若要转换编码格式，我们将运用<code>“-c”</code>来使用ffmpeg支持的编解码器。</p>
<p><code>“-c”</code>参数包括了音视频的全部编解码器，所以以前的<code>“-c copy”</code>是复制音视频编码的意思。当然我们也可以直接用<code>“-c copy”</code>转码音频，没有视频也没关系。</p>
<p>要只对视频里的画面或者声音进行操作的话，我们可以用<code>“-c:v”</code>来限定只处理视频画面，<code>“-c:a”</code>来限定只处理视频里的音频声音，<code>“-c:s”</code>来限定只处理字幕。</p>
<p>经常用的比如<code>“-c:v libx264”</code>，表示将编码格式转换成h264；<code>“-c:a libmp3lame</code>”，表示将编码格式转换成mp3。</p>
<p>这里的<code>“libx264”</code>、<code>“libmp3lame”</code>是编码器的名字（文末再说编码器名怎么得知）。简单形象地说，“容器格式、编码格式、编码器”的一个可行搭配是<code>“avi、（h264、mp3）、（libx264、libmp3lame）”</code>。</p>
<p>我们也可以用<code>“-c:v h264”</code>、<code>“-c:a mp3”</code>来进行上述操作，这样的话不用知道编码器名也可以。</p>
<h5 id="23、获取帮助"><a href="#23、获取帮助" class="headerlink" title="23、获取帮助"></a><code>23、获取帮助</code></h5><p>在这个指南中，我已经覆盖大多数常常使用的 FFmpeg 命令。它有很多不同的选项来做各种各样的高级功能。要学习更多用法，请参考手册页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ man ffmpeg</span><br></pre></td></tr></table></figure>
<p>这就是全部了。我希望这个指南将帮助你入门 FFmpeg。如果你发现这个指南有用，请在你的社交和专业网络上分享它。更多好东西将要来。敬请期待！</p>
<p>谢谢！</p>
<hr>
<p>推荐阅读：</p>
<p><a href="https://link.zhihu.com/?target=https%3A//www.ostechnix.com/20-ffmpeg-commands-beginners/" target="_blank" rel="noopener">文章原文</a></p>
<p><a href="http://reader.epubee.com/books/mobile/1a/1a25ac735df0f9a6c37d8843c4284740/text00008.html" target="_blank" rel="noopener">ffmpeg入门到精通电子书</a></p>
<p><a href="https://longrm.com/2019/08/08/2019-08-08-ffmpeg-practice/" target="_blank" rel="noopener">练习使用FFmpeg将视频转码为hls，并添加水印</a></p>
<p><a href="https://blog.csdn.net/qiuchangyong/article/details/100188989" target="_blank" rel="noopener">ffmpeg视频切片、缩放与裁剪输出m3u8流</a></p>
<p><a href="https://blog.csdn.net/yu540135101/article/details/84311244" target="_blank" rel="noopener">ffmpeg实例，crop裁剪相关</a></p>
<p><a href="https://blog.csdn.net/lipengshiwo/article/details/79252028" target="_blank" rel="noopener">FFmpeg命令参数解释和功能命令汇总</a></p>

      
    </div>
    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">知识就是财富<i class="fa fa-credit-card" aria-hidden="true"></i></div>
    
</div>

      
    </div>
<div>
      
        

      
</div>
    
<div>

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>如果您觉得文章对您有帮助, 欢迎请我喝杯水！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="小码农 微信支付"/>
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i>Linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/09/Nginx之旅-Nginx作为代理服务器/" rel="next" title="Nginx之旅-Nginx作为代理服务器">
                <i class="fa fa-chevron-left"></i> Nginx之旅-Nginx作为代理服务器
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/09/Nginx之旅-Nginx作为缓存服务器/" rel="prev" title="Nginx之旅-Nginx作为缓存服务器">
                Nginx之旅-Nginx作为缓存服务器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/ava.jpg"
                alt="小码农" />
            
              <p class="site-author-name" itemprop="name">小码农</p>
              <p class="site-description motion-element" itemprop="description">小码农一只</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">176</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lufeisan" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/u/bd5d2ec272ca" target="_blank" title="简书">
                      
                        <i class="fa fa-fw fa-globe"></i>简书</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#针对初学者的-20-多个-FFmpeg-命令"><span class="nav-number">1.</span> <span class="nav-text">针对初学者的 20 多个 FFmpeg 命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、获取音频-视频文件信息"><span class="nav-number">1.1.</span> <span class="nav-text">1、获取音频/视频文件信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、转换视频文件到不同的格式"><span class="nav-number">1.2.</span> <span class="nav-text">2、转换视频文件到不同的格式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、转换视频文件到音频文件"><span class="nav-number">1.3.</span> <span class="nav-text">3、转换视频文件到音频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、更改视频文件的分辨率"><span class="nav-number">1.4.</span> <span class="nav-text">4、更改视频文件的分辨率</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、压缩视频文件"><span class="nav-number">1.5.</span> <span class="nav-text">5、压缩视频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、压缩音频文件"><span class="nav-number">1.6.</span> <span class="nav-text">6、压缩音频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、从一个视频文件移除音频流"><span class="nav-number">1.7.</span> <span class="nav-text">7、从一个视频文件移除音频流</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8、从一个媒体文件移除视频流"><span class="nav-number">1.8.</span> <span class="nav-text">8、从一个媒体文件移除视频流</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9、从视频中提取图像"><span class="nav-number">1.9.</span> <span class="nav-text">9、从视频中提取图像</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10、裁剪视频"><span class="nav-number">1.10.</span> <span class="nav-text">10、裁剪视频</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11、转换一个视频的具体的部分"><span class="nav-number">1.11.</span> <span class="nav-text">11、转换一个视频的具体的部分</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#12、设置视频的屏幕高宽比"><span class="nav-number">1.12.</span> <span class="nav-text">12、设置视频的屏幕高宽比</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#13、添加海报图像到音频文件"><span class="nav-number">1.13.</span> <span class="nav-text">13、添加海报图像到音频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#14、使用开始和停止时间剪下一段媒体文件"><span class="nav-number">1.14.</span> <span class="nav-text">14、使用开始和停止时间剪下一段媒体文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#15、切分视频文件为多个部分"><span class="nav-number">1.15.</span> <span class="nav-text">15、切分视频文件为多个部分</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#16、接合或合并多个视频部分到一个"><span class="nav-number">1.16.</span> <span class="nav-text">16、接合或合并多个视频部分到一个</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#17、添加字幕到一个视频文件"><span class="nav-number">1.17.</span> <span class="nav-text">17、添加字幕到一个视频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#18、预览或测试视频或音频文件"><span class="nav-number">1.18.</span> <span class="nav-text">18、预览或测试视频或音频文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#19、增加-减少视频播放速度"><span class="nav-number">1.19.</span> <span class="nav-text">19、增加/减少视频播放速度</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#20、创建动画的-GIF"><span class="nav-number">1.20.</span> <span class="nav-text">20、创建动画的 GIF</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#21、从-PDF-文件中创建视频"><span class="nav-number">1.21.</span> <span class="nav-text">21、从 PDF 文件中创建视频</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#22关于转码"><span class="nav-number">1.22.</span> <span class="nav-text">22关于转码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#23、获取帮助"><span class="nav-number">1.23.</span> <span class="nav-text">23、获取帮助</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小码农</span>

  
</div>



  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'sTIaDCPKKiCnMQ18wU7iKor7-gzGzoHsz',
        appKey: 'ELGmbVcpVvae1YJF2l1RTPPf',
        placeholder: '有问题请留言',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("sTIaDCPKKiCnMQ18wU7iKor7-gzGzoHsz", "ELGmbVcpVvae1YJF2l1RTPPf");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
